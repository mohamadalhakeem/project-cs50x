<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
    <link rel="shortcut icon" type="image/x-icon" href="/Screen_Shot/favicon.ico.png" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fetch/2.0.3/fetch.js"></script>
    <script defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC4XCdiTzXd9Fn2ZPRg_kjpi_OXZQ10mr8&callback=initMap&libraries=&v=weekly"></script>
        
    <title>FROM D TO G</title>
</head>
<body>
    <nav class="navbar navbar-light">
        <div class="containert">
          
        <a class="navbar-brand" href="/"><img src="/Screen_Shot/logo.png" alt="" width="30" height="30">From D to G</a> 
        </div>
    </nav>   
    <section id="hero">
        <div class="herophoto">
            <div>
                <h1>Welcome <span></span></h1>
                <h1>Each planted tree  <span></span></h1>
                <h1>makes the World Pollution Free.<span></span></h1>
                <a href="#left" type="button" class="cta">START PLANTING NOW</a>
            </div>
        </div>
    </section>

    {% if session.user_id %}
    <div class="from-add">
      <div id="left">
    <div class="container"> 
      <div class="row">
        <div class="col">
          <div class="header">
            <h2 class="animation a1">مرحبا بكم في خريطة بغداد</h2>
          </div>
        </div>

      </div>
      <div class="finall">
      <div class="row justify-content-center">
        <div class="col-sm-3 mt-5 ">
          <class="A">
            <h3>قم باضافة الموقع على الخريطة</h3>
          </div>
        </div>
      </div>
      <!--حقول خطوط الطول والعرض-->
      <div class="final">
      <div class="row justify-content-center">
        <div class=" col-sm-12 col-lg-3">
          <div class="location">
            <input class="form-control" id="add-form" name="latitude" placeholder=" خطوط العرض" type="number"required>
          </div>
          
        </div>
        
        <div class="col-sm-12 col-lg-3">
          <div class="location">
            <input class="form-control" id="add-form" name="longitude" placeholder=" خطوط الطول" type="number"required>
          </div>
        </div>
        
      </div></div>
      <!--البوتن التي عند الضغط عليه تظهر ماركر على الخريطة حسب الموقع الذي ادخله المستخدم-->
      <div class="finally">
      <div class="row justify-content-center">
        <div class="col-sm-3">
          <div class="form-add">
            <button class="btn1">اضف</button>             
          </div>
        </div>
      </div></div>
      
      <div class="row justify-content-center">
        <div class="col-sm-4">
          <div class="B">
            <h3>  او </h3>
          </div>
        </div>
      </div>
     <!--البوتن التي عند الضغط عليها تظهر للمستخدم موقعه الحالي-->
      <div class="finally">
      <div class="row justify-content-center">
        <div class="col-sm-3">
          <div class="form-add">
            <div class="form2">
              <button class="btn1" onclick="getLocation()">احصل على موقعك الحالي</button>
            </div>
          </div>
        </div>
      </div></div>
      <!--نوع الشجره وعددها-->
      <div class="final">
      <div class="row justify-content-center"> 
        <div class="col-sm-12 col-lg-3 ">
          <div class="location">
            <input class="form-control" id="add-form" autocomplete="off" name="plant" placeholder="نوع الشجرة" type="text"required>
          </div>
        </div>
        <div class="col-sm-12 col-lg-3">
          <div class="location">
            <input class="form-control" id="add-form" name="plantnumber" placeholder=" عدد الاشجار"  type="number"required>
          </div>
        </div>
      </div>
      <!--موقع لكاتبة النص الخاص بالمستخدم عن الشجرة-->
      <div class="row">
        <div class="col-12">
           
            <textarea id="add-form-d" rows="3" maxlength="200" placeholder="اكتب النص الخاص يالاشجار هنا "></textarea>
        </div>
      </div></div>
      <!--رفع الصور-->
      <div class="row justify-content-center">
        <div class="col col-lg-4">
          
          <div class="upload-pic">
           <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-upload" viewBox="0 0 16 16">
           <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
           <path d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z"/>
           </svg>
           <label class="text-upload" for="image">ارفع الصورة</label>
           <input name="image" required type="file" /> </div>
           </div>
        </div>
      </div>
      <!--البتن النهائيه-->
      <div class="finally">
        <div class="row justify-content-center">
          <div class="col-sm-4">
            <div class="form-add">
              <button class="btn1" id="map-marker-information">ازرع</button>            
            </div>
          </div>
        </div></div>
     </div>
     </div>
     </div> 
  {% else %}
  
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-sm-8">
        <div id="left">
          <div class="header">
            <h2 class="animation a1">login</h2>
          </div>
        </div>
      </div>
   </div>
   <div class="form2">
   <!--اسم المستخدم -->
    <div class="row justify-content-center">
      <div class="col-sm-3">
       <form class="form-log-in-1" enctype="multipart/form-data">
          <div class="form-log-in">
          <input class="form-control" id="form-log-in" autocomplete="off" autofocus class="form-control" id="username" placeholder="Username" type="text" required>
          </div>
        </form>
      </div>
      <!--كلمة السر-->
      <div class="row justify-content-center">
        <div class="col-sm-3">
         <form class="form-log-in-1" enctype="multipart/form-data">
            <div class="form-log-in">
              <input autocomplete="off" autofocus id="form-log-in" class="form-control" id="password" placeholder="Password" type="password" required>
            </div>
          </form>
        </div>
     </div>
     <div class="row justify-content-center">
      <div class="col-sm-3">
       <form class="form-log-in-1" enctype="multipart/form-data">
        <a class="form-log-in-a" href="#">create a new account ?</a>
        <button class="btn1" id="form-log-in" type="submit">LOG IN</button>
        </form>
      </div>
   </div>
    
  
  
  
  
 
   
  </div>
  </div>

    {% else if%}
    
    <div id="left">
      <div class="header">
        <h2 class="animation a1">Welcome to Baghdad map</h2>
      </div>
      <div class="form">
        <form class="form-registert" enctype="multipart/form-data">
            <div class="form-register">
            <input class="form-control" id="form-register" autocomplete="off" autofocus class="form-control" id="username" placeholder="Username" type="text" required>
            </div>
            <div class="form-register">
            <input autocomplete="off" autofocus id="form-register" class="form-control" id="password" placeholder="Password" type="password" required>
            </div>
            <div class="form-register">
              <input autocomplete="off" autofocus id="form-register" class="form-control" id="retype_password" placeholder="Retype Password" type="password" required>
            </div>
            <a class="form-register-a" href="#">Already have an account ? Log in</a>
            <button class="btn1" id="form-register-1" type="submit">create account</button>
          </form>
      </div>
    </div>
    {% endif %}
        <div class="map1">
            <div id="map"></div>
          </div>
    </div>


  <div class="chart">
    <canvas id="mychart"></canvas>
  </div>
  <div class="chart2">
    <canvas id="mychart2"></canvas>
  </div>

       <div class="footer-basic">
        <footer>
            <div class="social"><a href="#"><i class="icon ion-social-instagram"></i></a><a href="#"><i class="icon ion-social-snapchat"></i></a><a href="#"><i class="icon ion-social-twitter"></i></a><a href="#"><i class="icon ion-social-facebook"></i></a></div>
            <ul class="list-inline">
                <li class="list-inline-item"><a href="#">Home</a></li>
                <li class="list-inline-item"><a href="#">Services</a></li>
                <li class="list-inline-item"><a href="#">About</a></li>
                <li class="list-inline-item"><a href="#">Terms</a></li>
                <li class="list-inline-item"><a href="#">Privacy Policy</a></li>
            </ul>
            <p class="copyright">FROM D TO G © 2021</p>
        </footer>
        </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/js/bootstrap.bundle.min.js"></script>


    <!--كود الجافا المرسل من ايمن-->
      <script>
        var newmarker = 0;
        let markers =[];
        let map;
        var lt;
        var lg;
        var maplc = document.getElementById("maplc");
    
        function getLocation() {
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(showPosition);
        } else { 
          maplc.innerHTML = "Geolocation is not supported by this browser.";
        }
        }
        
        function showPosition(position) {
          if (markers != null){
          deleteMarkers()
          }
          lt = position.coords.latitude;
          lg = position.coords.longitude;
          document.getElementById("latitude").value = lt;
          document.getElementById("longitude").value = lg;
         addMarker({coords:{lat:lt,lng:lg}});
         newmarker = 1;
        }
        function initMap(){
            var options = {
                zoom:11.5,
                center:{lat:33.3152,lng:44.3661}
            }
            map = new google.maps.Map(document.getElementById('map'),options)
          
          addMarker({
            coords:{lat:33.36988247930407,lng:44.43122739273846},
            content:'<h5 class="text_map">Sara Ahmed</h5>'+
            '<h6 class="text_map">Planted: Tomato</h6>'+
            '<img src="/Screen_Shot/planting.jpg" class="map-img2" alt="...">'+
            '<button type="button" class="btn btn-outline-success">LIKE</button>'
          });
          addMarker({
            coords:{lat:33.3347519983913,lng:44.338701910869986},
            content:'<h5 class="text_map">Aymen Raeed</h5>' +
            '<h6 class="text_map">Planted: Apple Tree</h6>'+
            '<img src="/Screen_Shot/planting.jpg" class="map-img2" alt="...">'+
            '<button type="button" class="btn btn-outline-success">LIKE</button>'
          });
          map.addListener("click", (event) => {
            deleteMarkers()
            document.getElementById("latitude").value = event.latLng.lat()
            document.getElementById("longitude").value = event.latLng.lng()
            addMarker({coords:{lat:event.latLng.lat(),lng:event.latLng.lng()}});
            newmarker = 1
          });
          
          var myLineChart = new Chart(ctx, {
          type: 'line',
          data: data,
          options: options
      });
        }
        function addMarker(props){
          const marker = new google.maps.Marker({
              position:props.coords,
              map:map,
              animation: google.maps.Animation.DROP,
              icon:'/Screen_Shot/Tree icon.png'
          });
  
          var infowindow = new google.maps.InfoWindow({
            content: props.content,
          });

          marker.addListener("click", () => {
            infowindow.open(map, marker);
          }); 
          markers.push(marker);
        }
        function setMapOnAll(map) {
          for (let i = 0; i < markers.length; i++) {
            markers[i].setMap(map);
          }
        }
        function deleteMarkers() {
          if (newmarker == 1)
          {
            markers[markers.length - 1].setMap(null);
            markers[markers.length - 1].remove;
          }
        }
        
    </script>
    <script>
      mrkrs = JSON.parse('{{mrkrs | safe}}')
      for( i in mrkrs){
      function loaddata(){
      addMarker({
        coords:{lat:i["lat"],lng:i["length"]},
        content:'<h5 class="text_map">' + i["name"] +'</h5>' +
        '<h6 class="text_map">Planted:'+i["plant"]+'</h6>'+
        '<img src="'+i["img"]+'" class="map-img2" alt="...">'+
        '<button type="button" class="btn btn-outline-success">LIKE</button>'
      });
    }
  }
    </script>
    
    



    <script>
    var mychart = document.getElementById('mychart').getContext('2d');
    
    Chart.defaults.global.defaultFontFamily = 'Lato',
    Chart.defaults.global.defaultFontSize = 18,
    Chart.defaults.global.defaultFontColor = '#777';
    
    let masspopchart = new Chart(mychart, {
    type:'line',
    data:{
      labels:['2010','2011', '2012', '2013', '2014','2015','2016','2017','2018','2019','2020','2021'],
      datasets:[{
        label:'CO2%',
        data:[ 0.31,0.33,0.34,0.35,0.33,0.21,0.25,0.22,0.25,0.25,0.26,0.19],
        backgroundColor: ['rgba(20, 220, 103, 0.5)'],
        borderColor: ['rgba(20, 220, 103, 0.1)' ],
        borderWidth: 1,
        hoverBorderWidth:3.5,
      },
      {
        label:'O2%',
        data:[ 0.12,0.14,0.13,0.16,0.12,0.3,0.24,0.32,0.32,0.35,0.36,0.3],
        backgroundColor: ['rgba(0, 131, 207, 0.5)'],
        borderColor: ['rgba(0, 131, 207, 0.1)' ],
        borderWidth: 1,
        hoverBorderWidth:3.5,
        fill:true
      }
      
    ]
    },
    options:{ 
            scales: {
                yAxes: [{
    ticks: {
                beginAtZero: true
    }
    }]
           },
      title:{
        display:true,
        text:'Percentage of CO2 consumption and O2 producers in iraq over the years',
        fontSize:25
      },
      legend:{
        display:true
      }
        
      
    }
    });
    
    </script>
    
    <script>
      var mychart2 = document.getElementById('mychart2').getContext('2d');
      
      Chart.defaults.global.defaultFontFamily = 'Lato',
      Chart.defaults.global.defaultFontSize = 18,
      Chart.defaults.global.defaultFontColor = '#777';
      
      let masspopchart1 = new Chart(mychart2, {
      type:'doughnut',
      data:{
        labels:['Date palm','Apple trees', 'Orange trees', 'Grapes', 'pomegranate','tomato'],
        datasets:[{
          label:'Percentage of plants in iraq',
          data:[
          1,
          2,
          3,
          4,
          5,
          7	
          ],
           backgroundColor: [
                'rgba(255, 159, 64, 0.9)',
                'rgba(54, 162, 235, 0.9)',
                'rgba(255, 206, 86, 0.9)',
                'rgba(75, 192, 192, 0.9)',
                'rgba(153, 102, 255, 0.9)',
                'rgba(255, 99, 132, 0.9)'
                
            ],
            borderColor: [
                'rgba(255, 159, 64, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 99, 132, 1)'
                
            ],
            borderWidth: 1,
            hoverBorderWidth:3,
            
        }]
      
      },
      options:{ //
              //scales: {
              //    yAxes: [{
      //ticks: {
               //           beginAtZero: false
      //}
      //}]
         //     },
        title:{
          display:true,
          text:'Percentage of plants in iraq',
          fontSize:25
        },
        legend:{
          display:true
        }
          
        
      }
      });
      
      </script>
</body>
</html>